<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BloopBot AI</title>
<style>
  body { font-family: Arial; text-align: center; margin-top: 30px; background: #0d0d0d; color: #00ffcc; transition: background 0.3s; }
  #face { font-size: 100px; margin: 20px; }
  #status { font-size: 24px; margin: 10px; }
  #log { font-size: 16px; margin-top: 20px; max-height: 200px; overflow-y: auto; text-align: left; padding: 0 20px; }
</style>
</head>
<body>

<h1>BloopBot AI</h1>
<div id="face">üòê</div>
<p id="status">Bloop is idle</p>
<div id="log"></div>

<script>
const OPENAI_API_KEY = "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"; // <-- put your API key here
const actions = ['forward', 'backward', 'left', 'right', 'stop'];

// Update face emoji
function updateFace(emoji) { document.getElementById('face').innerText = emoji; }
// Update status text
function updateStatus(text) { 
    document.getElementById('status').innerText = text;
    const log = document.getElementById('log');
    log.innerHTML += `<div>> ${text}</div>`;
    log.scrollTop = log.scrollHeight;
}
// LED/background simulation
function simulateLED(action) {
    let color;
    switch(action){
        case 'forward': color = 'green'; break;
        case 'backward': color = 'red'; break;
        case 'left': color = 'blue'; break;
        case 'right': color = 'cyan'; break;
        case 'stop': color = 'yellow'; break;
        default: color = '#0d0d0d';
    }
    document.body.style.background = color;
}
// Voice output
function speak(text){
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'en-US';
    utterance.pitch = 1.2;
    utterance.rate = 1;
    speechSynthesis.speak(utterance);
}

// Send prompt to OpenAI API
async function getOpenAIResponse(prompt) {
    try {
        const response = await fetch("https://api.openai.com/v1/chat/completions", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "Authorization": `Bearer ${OPENAI_API_KEY}`
            },
            body: JSON.stringify({
                model: "gpt-4o-mini",
                messages: [{role: "user", content: prompt}],
                max_tokens: 60
            })
        });
        const data = await response.json();
        return data.choices[0].message.content.trim();
    } catch(e) {
        console.error(e);
        return "Bloop encountered an error!";
    }
}

// Autonomous loop
async function autonomousBloop() {
    // Pick a random action
    const action = actions[Math.floor(Math.random() * actions.length)];

    // Simulate LED & face
    simulateLED(action);
    updateFace('üòÉ');
    updateStatus(`Bloop is about to ${action}`);

    // Ask OpenAI what to say about this action
    const response = await getOpenAIResponse(`Bloop is about to ${action}. Say something fun and short!`);
    updateStatus(response);
    speak(response);

    // Repeat every 2-4 seconds randomly
    setTimeout(autonomousBloop, 2000 + Math.random() * 2000);
}

// Start Bloop
autonomousBloop();
</script>

</body>
</html>






